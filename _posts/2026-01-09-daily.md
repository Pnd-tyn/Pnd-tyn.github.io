---
layout: post
title: "wavデータ処理用のライブラリ"
date: 2026-01-09 14:00:00 +0900
tags: [アプリケーション]
---

## 概要

WAVフォーマットのデータを処理するとき、データチャンクの構造がデータロガー依存で面倒。
ロガーメーカーが独自ソフトを出すケースもあるが、たいてい会員登録が必要で囲い込んでいる。
１つ１つのロガーに対応するようなアプリケーションを作成する必要がある。

データチャンクの構造に従って、wavを読み込み、データを抽出するところまで行うスクリプトを書きたい。

参考：[RD-21](https://www.measuring.jp/pdfdoc/sou1002t.pdf)

p125からWAVEファイルのフォーマットを説明。


## 必要なチャンク

大体のデータ処理に必要な情報をチャンクから選択。

- RIFFチャンク
  - チャンクID: "RIFF"  ID関連はvalidation用
- fmt subチャンク
    - チャンクID: "fmt "
    - チャンネル数: "nChannels"
    - サンプリング周波数: "nSamplesPerSec"
    - １サンプル当たりのビット数: "wBitsPerSample"
- type subチャンク
    - チャンクID: "type "
- 共通設定チャンク
    - チャンクID: "CSET"
    - 測定開始時刻: "StartTime"
    - 総チャンネル数 "Unit Equipped Channles"
    - 有効になっているチャンネル数: "Total Enabled Channels"
    - 周波数レンジ: "Measure Frequency Range"
    - 周波数比（サンプリング周波数/周蓮蓮司）: "Measure Frequency Ratio"
- 共通設定（ch毎）チャンク
    - チャンネル番号: "Chx Number"
    - チャンネルが有効かどうか: "Chx Enabled"
    - センサタイプ: "Chx Sensor Type"
    - センサレンジ: "Chx Sensor Input Range"
    - ハイパスディジタルフィルタカットオフ周波数: "Chx HPF Cutoff Frequency"
    - ローパスディジタルフィルタカットオフ周波数: "Chx LPF Cutoff Frequency"
    - 単位: "Chx Measurement Unit"
    - 校正値: "Chx ValuePerBit" 1bit当たりの物理量
    - 校正値: "Chx ValuePerVolt" 感度
    - 校正値: "Chx Zero d Reference(EU)" (0dB基準値指数の表記)
- Wave Settingチャンク
    - チャンクID: "WSET"
- Wave Dataチャンク
    - チャンクID: "Chunk ID"
    - 実際の波形データ: "WAVEData"


これぐらいを各々のチャンクから読み出せば一般的な信号処理に必要なデータがそろうはず。